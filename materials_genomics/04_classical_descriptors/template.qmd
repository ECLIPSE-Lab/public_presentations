---
title: |
  Materials Genomics<br>
  Lecture 4: Classical Descriptors & Materials Fingerprints
bibliography: ref.bib
# csl: custom.csl
author:
  - name: Prof. Dr. Philipp Pelz
    affiliation: 
      - FAU Erlangen-Nürnberg
      - Institute of Micro- and Nanostructure Research
   
execute: 
  eval: true
  echo: true
format: 
    revealjs: 
        chalkboard: true
        mermaid:
            theme: forest
        # mermaid-format: png
        # scroll-view:
        #     activate: true
        #     snap: mandatory
        #     layout: full 
        width: 1920
        height: 1080
        menu:
            side: right
            width: wide 
        template-partials:
            - title-slide.html
        css: custom.css
        theme: custom.scss
        slide-number: c/t    
        logo: "eclipse_logo_small.png"          
        highlight-style: a11y
        incremental: true 
        background-transition: fade
        footer: "©Philipp Pelz - FAU Erlangen-Nürnberg - Materials Genomics"
---
 
 

## Welcome

### Week 4 — Classical Descriptors & Materials Fingerprints

**Goals for today:**

- Understand what “descriptors” / “fingerprints” are in materials ML  
- Learn Magpie-style compositional descriptors  
- Get an overview of matminer  
- Distinguish stoichiometric, elemental, and structural features  
- See how to build a small property regressor with Magpie features (conceptually)  

---

## Outline

1. What are materials descriptors & fingerprints?  
2. Magpie: classical compositional features  
3. matminer: a toolbox for descriptors  
4. Stoichiometric, elemental & structural feature types  
5. Exercise: small regressor with Magpie features  
6. Summary  

---

## 1. What Are Descriptors & Fingerprints?

A **descriptor** (or fingerprint) is a vector representation of a material:

- Takes structure / composition as input  
- Produces a numerical feature vector  
- Used as input to ML models  

The goal:

- Encode enough physics to predict properties  
- While being invariant to translation, rotation, atom ordering  

---

## Why Descriptors Matter

ML models need numbers, not CIFs or POSCARs.

Descriptors:

- Bridge raw chemistry/structure → ML input  
- Capture trends across chemical space  
- Enable property prediction (band gap, stability, hardness…)  

Classical descriptors:

- Hand-engineered  
- Human-understandable  
- Still very competitive and widely used  

---

## 2. Magpie: Classical Compositional Features

Magpie is a widely used set of **compositional descriptors**.

Idea:

- Take periodic table properties (e.g. electronegativity, atomic radius)  
- Combine them across the composition using statistics  

Result:

- A fixed-length feature vector per composition  
- No structure needed (only formula)  

---

## Magpie Features: Categories

1. **Stoichiometric features**  
   - Functions of the composition fractions only  

2. **Elemental property statistics**  
   - Aggregations (mean, variance, min, max) of elemental properties  
   - e.g. atomic number, electronegativity, covalent radius  

3. **Valence & electronic structure features**  
   - s/p/d/f electron counts, valence electron fractions  

4. **Ionic & structural hints (optional)**  
   - Ionic character  
   - Approximate structural radii  

---

## Examples of Magpie Features

For composition \(A_xB_yC_z\):

- Stoichiometric:
  - Number of elements  
  - Shannon entropy of composition  
  - Fraction of largest element  

- Elemental:
  - Mean electronegativity  
  - Standard deviation of atomic radius  
  - Range of ionization energy  

- Electronic:
  - Fraction of s-valence electrons  
  - Fraction of d-valence electrons  

These form a “materials fingerprint”.

---

## Why Magpie Is Useful

Pros:

- Only needs composition  
- Fast to compute  
- Works with large databases (no structure required)  
- Intuitive, interpretable features  

Cons:

- Ignores detailed structure  
- Limited for properties that depend strongly on local geometry  

---

## 3. matminer: A Descriptor Toolbox

**matminer** is a Python library that implements:

- Magpie-style features  
- Many other descriptor sets  
- Tools for featurizing compositions, structures, and band structures  

It acts as:

- A “descriptor factory” for Materials Genomics  
- Integration layer with pymatgen and ML libraries  

---

## matminer Feature Types (High-Level)

matminer groups featurizers into:

- **Composition-based** (Magpie-like)  
- **Structure-based** (Voronoi, radial distributions…)  
- **Site-based** (local environments)  
- **Band-structure-based** (DOS, gaps, effective masses)  

For this week we mainly focus on:

- **Composition-based (Magpie-like)**  
- A teaser of **structure-based** features  

---

## 4. Stoichiometric, Elemental & Structural Features

We now categorize descriptors more systematically.

---

## 4.1 Stoichiometric Features

Depend **only on composition fractions**, not on which elements.

Examples:

- Number of components  
- Largest/smallest fraction  
- Shannon entropy of composition  
- Lᵖ norms of composition vector  

These capture:

- Mixing complexity  
- Alloy character  
- Entropy-like effects  

---

## What Stoichiometric Features Miss

They ignore:

- Which elements appear  
- Any periodic table trend  

They’re useful but too generic alone.

---

## 4.2 Elemental Features

Use **element-specific properties** from the periodic table.

Examples of elemental properties:

- Atomic number  
- Atomic mass  
- Covalent radius  
- Pauling electronegativity  
- Ionization energy  
- Valence electron counts  

---

## Aggregating Elemental Properties

Given a composition:

1. Look up each element’s property (e.g. electronegativity)  
2. Weight by atomic fraction  
3. Compute statistics:
   - Weighted mean  
   - Weighted standard deviation  
   - Range (max – min)  
   - Min and max  

These aggregated values form the **elemental feature set**.

---

## Why Elemental Features Are Powerful

They encode:

- Chemical similarity (e.g. similar electronegativities)  
- Size mismatch  
- Valence electron trends  
- Basic bonding preferences  

Many successful property models (e.g. formation energy, band gap) use **only compositional + elemental features**.

---

## 4.3 Structural Features (Classical)

Structural descriptors require **atomic positions + lattice**.

Examples:

- Volume per atom  
- Density  
- Packing fraction  
- Nearest-neighbor distances  
- Coordination numbers  
- Voronoi coordination statistics  
- Radial distribution function features  

These capture:

- Local geometry  
- Bond environment  
- Packing and connectivity  

---

## Structural vs Compositional

Compositional (Magpie-type):

- Fast  
- Requires only formula  
- Great for screening large composition spaces  

Structural:

- More informative for local properties (elasticity, diffusion, phonons)  
- Requires structure (CIF/POSCAR)  
- Slightly more expensive to compute  

Often used **together**.

---

## 5. Exercise: Small Property Regressor with Magpie Features

Goal:

- Show how to go from composition → Magpie features → property prediction.

---

## Step 1 — Collect Data

We need:

- A list of formulas (e.g. from Materials Project)  
- A target property:
  - Example: formation energy per atom  
  - Or band gap, bulk modulus, etc.

Conceptual data structure:
- `formula`  
- `property`  

---

## Step 2 — Compute Magpie Features

Using matminer / Magpie utilities:

**PYTHONHERE**

Conceptual operations:
- Initialize a Magpie/composition featurizer  
- Apply it to each formula  
- Get a feature matrix:  
  \[
  X \in \mathbb{R}^{N \times d}
  \]
  where \(N\) = samples, \(d\) = number of features  

Now you have:
- `X` = features  
- `y` = property values  

---

## Step 3 — Train a Simple Regressor

Use a standard ML model, e.g.:
- Random Forest Regressor  
- Gradient Boosted Trees  
- Linear model with regularization  

**PYTHONHERE**

Typical procedure:
- Split into train/validation sets  
- Train regressor on Magpie features  
- Evaluate R², MAE, etc.  

---

## Step 4 — Interpretation

Ask:
- Which features are most important? (feature importance)  
- Do elemental radius / electronegativity statistics dominate?  
- Does composition complexity (entropy) matter?  

This demonstrates:
- Classical descriptors are **interpretable**  
- They capture periodic trends  
- They already enable powerful ML models before deep learning enters  

---

## 6. Summary

**Today you learned:**
- What materials descriptors / fingerprints are  
- Magpie-style classical compositional features  
- matminer as a toolbox for featurization  
- Difference between stoichiometric, elemental, and structural features  
- How to conceptually build a property regressor using Magpie features  

Next week:  
**Week 5 — Structure-Based Descriptors & Graph Representations**  
(Local environments, Voronoi features, crystal graphs, etc.)  

---

## Questions?

Use the chalkboard!

<div>
<script>
document.getElementById("marimo-frame").onload = function() {
    try {
        let iframeDoc = document.getElementById("marimo-frame").contentWindow.document;
        let marimoBadge = iframeDoc.querySelector("div.fixed.bottom-0.right-0.z-50");
        if (marimoBadge) {
            marimoBadge.style.display = "none";
            console.log("Marimo badge hidden successfully.");
        } else {
            console.log("Badge not found.");
        }
    } catch (error) {
        console.warn("Unable to modify iframe content due to CORS restrictions.");
    }
};
</script>
</div>